## Process

- CPU를 프로세스로 추상화해 관리
- 프로세스는 실행 중인 프로그램 
- 디스크에 있던 프로그램을 메모리로 로드해 OS의 제어를 받는 상태가 되는 것

### Context Switch

- 여러 프로세스가 아주 빠른 속도로 **Interleave**하게 CPU 차지 (CPU 가상화)
- 프로세스 간 CPU 양도를 Context Switch(문맥 교환)라고 하며 모드 전환으로 오버헤드 발생
- Save the old context & Execution of the New Context 발생

### PCB (Process Control Block)

- 프로세스 정보 저장
- 수행 중 Interrupt 발생해도 다시 CPU 권한을 받았을 때 프로그램 수행이 제대로 재개할 수 있도록 충분한 정보를 유지
- PID, state, nice(우선순위), PC(Program counter), Memory pointer, HW Context data 등으로 구성

### 프로세스 생성

- 부모 프로세스 fork() 호출
- 부모 프로세스의 코드 영역을 제외한 모든 메모리 영역 Copy-on-Write 기법

### Multi Process

- 프로세스는 자신만의 주소 공간이 존재하고 다른 프로세스에게 영향을 주지 않음
- IPC (Inter Process Communication) 을 통해 프로세스 간의 통신 가능

<br>

***

## Thread

프로세스 내에서 작업 단위로 시스템의 여러 자원을 할당받아 실행하는 프로그램 단위를 스레드라고 한다.
- 프로세스 내 여러 스레드 존재
- 같은 프로세스 내에서 모든 스레드는 스택을 제외한 **코드, 데이터 및 힙 영역 공유**

### Multi Thread

- 멀티 스레드 환경에서 프로세스는 하나 이상의 스레드 생성 가능

### Thread 생성

- 스레드 생성 시 TCB, stack 공간 할당

### 메모리 공유

스레드는
- 같은 프로세스 내에서 모든 스레드는 스택을 제외한 **코드, 데이터 및 힙 영역 공유** (문맥 교환에서 발생하는 오버헤드가 적음)
- 멀티 스레드 환경에서 스레드 간 데이터 공유 쉬움

처리 속도가 빠른 프로세서와 상대적으로 느린 메인 메모리의 속도 차이를 보완하는 고속 버퍼를 캐시라고 한다.
- 캐시 메모리를 통해 CPU에서 읽은 데이터를 저장하고 CPU가 다시 요구하는 경우
- 메인 메모리를 거치지 않고 캐시에 저장된 데이터를 바로 전달해 빠른 속도로 처리 가능
- 프로세스는 서로 메모리를 공유하지 않기 때문에 문맥 교환이 일어나면 **캐시 메모리에 있는 모든 데이터 리셋**
- 캐시는 Data와 Heap 영역을 공유하기 때문에 문맥 교환이 일어나도 **캐시 메모리를 리셋할 필요 없음**
- 이런 이유로 문맥 교환 시 스레드 속도가 더 빠름

하지만 공유한다고 좋은 점만 있는 것은 아니다.
- 영향도: 메모리를 공유해 다른 스레드에게 영향을 미칠 수 있음
- 동시성 문제: 스레드의 실행 순서를 파악할 수 없어 디버깅이 어렵고 쓰기 작업 시 동시성(concurrency) 문제 발생 (동기화 작업 필요)