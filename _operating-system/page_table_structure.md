## Page table 메모리 낭비

- 논리적 주소가 클수록 물리적 주소로 변환하는 과정에서 필요한 페이지 테이블 크기도 증가하므로 더 큰 적재 공간이 필요
- 32비트 프로세서는 2^32 인 약 4GB의 가상 주소 공간을 사용
- offset이 12비트라면 Page의 크기는 2^12 = 4,096KB
- 4GB/4KB = 2^32 / 2^12 = 2^20개의 PTE 필요
- 각 Page를 가리키는 PTE 1개의 크기는 2^2byte
- 4GB의 가상 주소 공간을 사용하기 위해 2^20 X 2^2 = 2^22 크기의 페이지 테이블이 필요

<br>

## N 단계 페이지 테이블

![jpeg](/operating-system/_img/n_level_page_table.jpeg)

> 출처: 운영체제 - 구현회

- 4GB 중 실제 참조할 페이지가 있는 영역에만 단계별 페이지 테이블을 설정해 메모리 낭비를 줄일 수 있음
- 2단계라면 첫번째 단계인 루트를 디렉터리 테이블, 두번째 단계를 Page table로 구성

### 루트: 디렉터리 테이블

- 디렉터리 테이블을 10비트로 구성한다면 2^10 = 1024개의 항목을 갖고
- 한 항목은 4B이므로 1,024 X 4B = 4KB 크기인 1개의 Page frame으로 해결 가능

### 두번쨰 단계: Page table

- Page table을 10비트로 구성한다면 2^10 = 1024개의 항목을 갖고
- 디렉터리 테이블의 한 항목이 1개의 Page table을 가리키는 구조이므로
- 1,024(디렉터리 테이블의 항목수) X 1,024(Page table의 항목수) = 1,048,576개의 Page frmae을 가리킬 수 있음
- 실제 참조하는 부분만 index 기법으로 가리키므로 메모리 낭비를 줄일 수 있음
